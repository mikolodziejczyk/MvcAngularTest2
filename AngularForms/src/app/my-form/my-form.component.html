<div class="container-fluid">
  <div class="page-header">
    <h1>
      <ng-container *ngIf="isNew">Dodawanie nowego elementu</ng-container>
      <ng-container *ngIf="!isNew">Edycja elementu
        <b>{{ initialData.displayName }}</b>
      </ng-container>
    </h1>
  </div>

  <ng-container *ngIf="formMetadata && !isFailure">

    <form class="form-horizontal" [formGroup]="myForm" novalidate (ngSubmit)="onSubmit()">

      <mko-editor-form-row [boundFormControl]="unitPrice" [metadata]="controlMetadata['unitPrice']">
      </mko-editor-form-row>
      <mko-editor-form-row [boundFormControl]="startYear" [metadata]="controlMetadata['startYear']">
      </mko-editor-form-row>
      <mko-editor-form-row [boundFormControl]="lastName" [metadata]="controlMetadata['lastName']">
      </mko-editor-form-row>
      <mko-editor-form-row [boundFormControl]="notifyViaMail" [metadata]="controlMetadata['notifyViaMail']">
      </mko-editor-form-row>

      <mko-form-row [formGroup]='extraPerson' [control]="extraPerson" [label]="controlMetadata['extraPerson']?.label" [help]="controlMetadata['extraPerson']?.help">
        <div class="row">
          <!-- <div class="col-sm-6">
            <mko-string-control [formControl]="extraPerson['firstName']"
              [control]="extraPerson['firstName']" [metadata]="controlMetadata['extraPerson'].controls['firstName']" >
            </mko-string-control>
          </div>
          <div class="col-sm-6">
            <mko-string-control [formControl]="extraPerson['lastName']" [control]="extraPerson['lastName']"  [metadata]="controlMetadata['extraPerson'].controls['lastName']"
              >
            </mko-string-control>
          </div> -->
        </div>
      </mko-form-row>



      <mko-form-errors [control]="myForm"></mko-form-errors>

      <mko-form-actions (save)="onSubmit();" (cancel)="onCancel();" [isSaving]="isSaving" [isCancelling]="isCancelling"></mko-form-actions>
    </form>

  </ng-container>

  <ng-container *ngIf="!formMetadata">
    <div>Loading...</div>
  </ng-container>

  <mko-operation-failed [active]="isFailure" [bodyHtml]="failureMessage" [backLinkUrl]="formMetadata?.cancelUrl"></mko-operation-failed>
</div>
<mko-overlay [active]="isSaving || isCancelling"></mko-overlay>